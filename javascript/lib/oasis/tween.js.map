{"version":3,"file":"module.js","sources":["../src/Tween.ts","../src/Enums.ts","../src/BezierEasing.ts","../src/Easing.ts","../src/TweenerBase.ts","../src/Tweener.ts","../src/plugins/QuaternionPlugin.ts","../src/plugins/FloatPlugin.ts","../src/plugins/core/VectorPluginFactory.ts","../src/plugins/Vector2Plugin.ts","../src/plugins/Vector3Plugin.ts","../src/plugins/Vector4Plugin.ts","../src/adapters/o3.ts"],"sourcesContent":["/**\n * Tween class\n * @class\n */\nclass Tween {\n  private _nextId;\n  public tweeners;\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._nextId = 0;\n    this.tweeners = {};\n  }\n\n  /**\n   * Next id.\n   * @member {number}\n   * @readonly\n   */\n  getId() {\n    return this._nextId++;\n  }\n\n  /**\n   * Add keyframe.\n   * @param tweener - Keyframe\n   */\n  add(tweener) {\n    if (!tweener.id) {\n      tweener.id = this.getId();\n    }\n    this.tweeners[tweener.id] = tweener;\n  }\n\n  /**\n   * Update the internal state of the tween and delete the key frames that have been played and are not needed.\n   * @param {number} deltaTime - Time between two frames\n   */\n  update(deltaTime) {\n    for (const tweenerId in this.tweeners) {\n      const tweener = this.tweeners[tweenerId];\n\n      tweener.update(deltaTime);\n\n      // remove unused tweener\n      if (tweener._played && tweener._paused && !tweener.preserved) {\n        delete this.tweeners[tweenerId];\n      }\n    }\n  }\n}\n\nexport { Tween };\n","export const LOOP_TYPE = {\n  Restart: 0,\n  Yoyo: 1\n  // TODO\n  // Incremental: 2,\n};\n","/**\n * Fork from https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === \"function\";\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX,\n    currentT,\n    i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nfunction LinearEasing(x) {\n  return x;\n}\n\nexport function bezier(mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error(\"bezier x values must be in [0, 1] range\");\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0 || x === 1) {\n      return x;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n","import { bezier } from \"./BezierEasing\";\n\n// t, b, c, d => currentTime, startValue, changeInValue, totalTime\nexport function linear(t, b, c, d) {\n  return (c * t) / d + b;\n}\n\nexport function easeInQuad(t, b, c, d) {\n  return c * (t /= d) * t + b;\n}\n\nexport function easeOutQuad(t, b, c, d) {\n  return -c * (t /= d) * (t - 2) + b;\n}\n\nexport function easeInOutQuad(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t + b;\n  } else {\n    return (-c / 2) * (--t * (t - 2) - 1) + b;\n  }\n}\n\nexport function easeInCubic(t, b, c, d) {\n  return c * (t /= d) * t * t + b;\n}\n\nexport function easeOutCubic(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\n\nexport function easeInOutCubic(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t + 2) + b;\n  }\n}\n\nexport function easeInQuart(t, b, c, d) {\n  return c * (t /= d) * t * t * t + b;\n}\n\nexport function easeOutQuart(t, b, c, d) {\n  return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n}\n\nexport function easeInOutQuart(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t + b;\n  } else {\n    return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;\n  }\n}\n\nexport function easeInQuint(t, b, c, d) {\n  return c * (t /= d) * t * t * t * t + b;\n}\n\nexport function easeOutQuint(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n}\n\nexport function easeInOutQuint(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n}\n\nexport function easeInSine(t, b, c, d) {\n  return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;\n}\n\nexport function easeOutSine(t, b, c, d) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function easeInOutSine(t, b, c, d) {\n  return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;\n}\n\nexport function easeInExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === 0) !== null\n    ? _ref\n    : {\n        b: c * Math.pow(2, 10 * (t / d - 1)) + b\n      };\n}\n\nexport function easeOutExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === d) !== null\n    ? _ref\n    : b +\n        {\n          c: c * (-Math.pow(2, (-10 * t) / d) + 1) + b\n        };\n}\n\nexport function easeInOutExpo(t, b, c, d) {\n  if (t === 0) {\n    b;\n  }\n  if (t === d) {\n    b + c;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;\n  } else {\n    return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n}\n\nexport function easeInCirc(t, b, c, d) {\n  return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n}\n\nexport function easeOutCirc(t, b, c, d) {\n  return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n}\n\nexport function easeInOutCirc(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;\n  } else {\n    return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n}\n\nexport function easeInElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n}\n\nexport function easeOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) + c + b;\n}\n\nexport function easeInOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d / 2) === 2) {\n    b + c;\n  }\n  if (!p) {\n    p = d * (0.3 * 1.5);\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  if (t < 1) {\n    return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n  } else {\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) * 0.5 + c + b;\n  }\n}\n\nexport function easeInBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * (t /= d) * t * ((s + 1) * t - s) + b;\n}\n\nexport function easeOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n}\n\nexport function easeInOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  }\n}\n\nexport function easeInBounce(t, b, c, d) {\n  let v;\n  v = easeOutBounce(d - t, 0, c, d);\n  return c - v + b;\n}\n\nexport function easeOutBounce(t, b, c, d) {\n  if ((t /= d) < 1 / 2.75) {\n    return c * (7.5625 * t * t) + b;\n  } else if (t < 2 / 2.75) {\n    return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n  } else if (t < 2.5 / 2.75) {\n    return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n  } else {\n    return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n  }\n}\n\nexport function easeInOutBounce(t, b, c, d) {\n  let v;\n  if (t < d / 2) {\n    v = easeInBounce(t * 2, 0, c, d);\n    return v * 0.5 + b;\n  } else {\n    v = easeOutBounce(t * 2 - d, 0, c, d);\n    return v * 0.5 + c * 0.5 + b;\n  }\n}\n\n/**\n * Generate easing through bezier curve control points.\n * Hats off to gre: https://github.com/gre/bezier-easing\n *\n * @param x1 - X of control point 1, range 0-1\n * @param y1 - Y of control point 1, range 0-1\n * @param x2 - X of control point 2, range 0-1\n * @param y2 - Y of control point 2, range 0-1\n */\nexport function bezierEasing(x1, y1, x2, y2) {\n  const easing = bezier(x1, y1, x2, y2);\n\n  return (t, b, c, d) => {\n    return c * easing(t / d) + b;\n  };\n}\n","import { LOOP_TYPE } from \"./Enums\";\nimport * as Easing from \"./Easing\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * TweenBase class\n * @class\n * @private\n */\nclass TweenerBase {\n  protected _time;\n  protected _paused;\n  protected _remainLoops;\n  protected _played;\n  public options;\n  public elapsedTime;\n  public interval;\n  public rewind;\n  public preserved;\n  public startValue;\n  public endValue;\n  public getter;\n  public setter;\n\n  constructor(getter, setter, endValue, interval, options = {}, target) {\n    this.options = {\n      id: \"\",\n      loops: {\n        // set -1 as infinite\n        count: 0,\n        type: LOOP_TYPE.Yoyo\n      },\n      easing: Easing.linear,\n      delay: 0,\n\n      plugin: noop,\n      pluginOptions: {},\n\n      // callbacks\n      onComplete: noop,\n      onTick: noop,\n\n      ...options\n    };\n\n    this._time = 0;\n    this._remainLoops = this.options.loops.count || 0;\n    this._paused = true;\n    this._played = false;\n    this.rewind = false;\n    this.preserved = false;\n\n    this.elapsedTime = 0;\n    this.startValue = getter();\n    this.endValue = endValue;\n    this.getter = getter;\n    this.setter = setter;\n\n    this.interval = interval;\n  }\n\n  duration() {}\n\n  update(deltaTime) {}\n\n  /**\n   * Set loop times.\n   * @param {number} count - Loop count\n   * @param {LOOP_TYPE} type - Loop type\n   */\n  setLoops(count, type = LOOP_TYPE.Yoyo) {\n    this.options.loops = { count, type };\n    // reset loop\n    this._remainLoops = count;\n\n    return this;\n  }\n\n  set(key, value) {\n    this.options = { ...this.options, ...{ [key]: value } };\n    return this;\n  }\n\n  stop() {\n    this.options.onComplete(this);\n\n    this._paused = true;\n\n    return this;\n  }\n\n  pause() {\n    if (this._paused) return false;\n    this._paused = true;\n\n    return this;\n  }\n\n  start(tweenManager) {\n    if (tweenManager) {\n      tweenManager.add(this);\n    }\n\n    if (!this._paused) return false;\n    this.elapsedTime = 0;\n    this._paused = false;\n    this._played = true;\n\n    return this;\n  }\n}\n\nexport { TweenerBase };\n","import { LOOP_TYPE } from \"./Enums\";\nimport { TweenerBase } from \"./TweenerBase\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * Tweener class\n * @extends TweenerBase\n */\nclass Tweener extends TweenerBase {\n  /**\n   * @constructor\n   * @param {function} getter - Getter function\n   * @param {function} setter - Setter function\n   * @param {number} endValue - End value\n   * @param {number} interval - Time interval\n   * @param {Object} options - Options\n   * @param target\n   * @param {function} options.onComplete - Completed callback function\n   */\n  constructor(getter, setter, endValue, interval, options = {}, target = null) {\n    super(getter, setter, endValue, interval, options, target);\n  }\n\n  /** Calculate the total duration of Tween animation.\n   * @member {number}\n   */\n  duration() {\n    // infinite\n    let duration = 0;\n\n    if (this.options.loops.count === -1) {\n      duration = -1;\n    } else {\n      // FIXME: add rewind time\n      duration = this.options.delay + this.options.loops.count * this.interval;\n    }\n\n    return duration;\n  }\n\n  /**\n   * Update the state in the tween and detect whether the animation is about to end.\n   * @param {number} deltaTime - Time between two frames\n   * @private\n   */\n  update(deltaTime) {\n    this._time += deltaTime;\n    if (!this._paused) {\n      // if delay don't update\n      if (this.options.delay > this._time) {\n        return true;\n      }\n\n      this.elapsedTime += deltaTime;\n      // in case deltaTime is really big\n      this.elapsedTime = this.elapsedTime > this.interval ? this.interval : this.elapsedTime;\n\n      // on start callback\n      this.options.plugin(this);\n      this.options.onTick(this);\n\n      // everything has an end....\n      if (this.elapsedTime === this.interval) {\n        // loop it\n        if (this._remainLoops > 0 || this._remainLoops <= -1) {\n          switch (this.options.loops.type) {\n            case LOOP_TYPE.Yoyo:\n              this.rewind = !this.rewind;\n              this.elapsedTime = 0;\n              if (!this.rewind) {\n                this._remainLoops--;\n              }\n              break;\n            case LOOP_TYPE.Restart:\n              // reset\n              this.elapsedTime = 0;\n              this._remainLoops--;\n              break;\n          }\n        } else {\n          this.stop();\n        }\n      }\n\n      return true;\n    }\n  }\n}\n\nexport { Tweener };\n","import { Quaternion } from \"oasis-engine\";\n\nexport const QuaternionPlugin = (tweener) => {\n  const { easing } = tweener.options;\n\n  const result = new Quaternion();\n\n  const percent = easing(tweener.elapsedTime, 0, 1, tweener.interval);\n  Quaternion.slerp(tweener.startValue, tweener.endValue, percent, result);\n\n  tweener.setter(result);\n};\n","export const FloatPlugin = tweener => {\n  const easing = tweener.options.easing;\n\n  const result = easing(\n    tweener.elapsedTime,\n    tweener.startValue,\n    tweener.endValue - tweener.startValue,\n    tweener.interval\n  );\n\n  tweener.setter(result);\n};\n","import { Vector2, Vector3, Vector4 } from \"oasis-engine\";\n\nconst handleVecComp = (tweener, comp: string, result: Vector2 | Vector3 | Vector4) => {\n  const easing = tweener.options.easing;\n\n  let startValue = tweener.startValue[comp];\n  let offsetValue = tweener.endValue[comp] - tweener.startValue[comp];\n\n  if (tweener.rewind) {\n    startValue = tweener.endValue[comp];\n    offsetValue = tweener.startValue[comp] - tweener.endValue[comp];\n  }\n\n  result[comp] = easing(tweener.elapsedTime, startValue, offsetValue, tweener.interval);\n};\n\nconst VectorPluginGenerator = (count) => {\n  return (tweener) => {\n    let result;\n    switch (count) {\n      case 2:\n        result = new Vector2();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        break;\n      case 3:\n        result = new Vector3();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        handleVecComp(tweener, \"z\", result);\n        break;\n      default:\n        result = new Vector4();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        handleVecComp(tweener, \"z\", result);\n        handleVecComp(tweener, \"w\", result);\n        break;\n    }\n\n    tweener.setter(result);\n  };\n};\n\nexport default VectorPluginGenerator;\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector2Plugin = generator(2);\n\nexport { Vector2Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector3Plugin = generator(3);\n\nexport { Vector3Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector4Plugin = generator(4);\n\nexport { Vector4Plugin };\n","import * as TweenPlugins from \"../plugins\";\nimport { Tweener } from \"../Tweener\";\nimport { DataType } from \"oasis-engine\";\n\n/***  Do rotation interpolation transformation.\n * @param {Object} obj - Object\n * @param {quat} endValue - End quaternion\n * @param {number} interval - Time interval\n * @param {Object} options - Options\n * @param {function} options.onComplete - Completed callback function\n */\nconst doTransformRotate = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.QuaternionPlugin;\n  return new Tweener(\n    () => obj.rotation.clone(),\n    (value) => (obj.rotation = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/*** Do translation interpolation transformation.\n * @param {Object} obj - Object\n * @param {Vector3} endValue - End value\n * @param {number} interval - Time interval\n * @param {Object} options - Options\n * @param {function} options.onComplete - Completed callback function\n */\nconst doTransformTranslate = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n\n  return new Tweener(\n    () => obj.position.clone(),\n    (value) => (obj.position = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/*** Do scaling interpolation transformation.\n * @param {Object} obj - Object\n * @param {Vector3} endValue - End value\n * @param {number} interval - Time interval\n * @param {Object} options - Options\n * @param {function} options.onComplete - Completed callback function\n */\nconst doTransformScale = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n  return new Tweener(\n    () => obj.scale.clone(),\n    (value) => (obj.scale = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/***\n * Do material parameters interpolation transformation.\n * @param {Material} mtl - Material\n * @param {*} endValue - End value\n * @param {string} property - Material property\n * @param {number} interval - Time interval\n * @param {Object} options - Options\n * @param {function} options.onComplete - Completed callback function\n */\nconst doMaterialValue = (mtl, endValue, property = \"\", interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.FloatPlugin;\n\n  return new Tweener(\n    () => mtl.getValue(property),\n    (value) => mtl.setValue(property, value),\n    endValue,\n    interval,\n    options,\n    mtl\n  );\n};\n\n/*** Do material color interpolation transformation.\n * @param {Material} mtl - Material\n * @param {Vector3} endValue - End value\n * @param {string} property - Material property\n * @param {number} interval - Time interval\n * @param {Object} options - Options\n * @param {function} options.onComplete - Completed callback function\n */\nconst doMaterialColor = (mtl, endValue, property = \"\", interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n\n  return new Tweener(\n    () => mtl.getValue(property),\n    (value) => {\n      mtl.setValue(property, [value[0] / 255, value[1] / 255, value[2] / 255]);\n    },\n    endValue,\n    interval,\n    options,\n    mtl\n  );\n};\n\n/*** Do general numerical interpolation transformation.\n * @param {number|Vector2|Vector3|Vector4} startValue - Start value\n * @param {function} setter - Setter function\n * @param {number|Vector2|Vector3|Vector4} endValue - End value\n * @param interval - Time interval\n * @param {Object} options - Options\n * @param {DataType} options.dataType\n * @param {function} options.onComplete - Completed callback function\n */\nconst doTransformByDataType = (startValue, setter, endValue, interval, options: any = {}) => {\n  if (options.dataType === DataType.FLOAT_VEC2) {\n    options.plugin = options.plugin || TweenPlugins.Vector2Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else if (options.dataType === DataType.FLOAT_VEC3) {\n    options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else if (options.dataType === DataType.FLOAT_VEC4) {\n    options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else {\n    options.plugin = options.plugin || TweenPlugins.FloatPlugin;\n    return new Tweener(() => startValue, setter, endValue, interval, options);\n  }\n};\n\nexport const doTransform = {\n  Rotate: doTransformRotate,\n  Translate: doTransformTranslate,\n  Scale: doTransformScale,\n  DataType: doTransformByDataType\n};\n\nexport const doMaterial = {\n  Float: doMaterialValue,\n  Color: doMaterialColor\n};\n"],"names":["Tween","_nextId","tweeners","getId","add","tweener","id","update","deltaTime","tweenerId","_played","_paused","preserved","LOOP_TYPE","Restart","Yoyo","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","x","bezier","mY1","mY2","Error","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","_ref","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","v","easeOutBounce","easeInOutBounce","bezierEasing","x1","y1","x2","y2","easing","noop","TweenerBase","getter","setter","endValue","interval","options","target","_time","_remainLoops","elapsedTime","rewind","startValue","loops","count","type","Easing","delay","plugin","pluginOptions","onComplete","onTick","duration","setLoops","set","key","value","stop","pause","start","tweenManager","Tweener","QuaternionPlugin","result","Quaternion","percent","slerp","FloatPlugin","handleVecComp","comp","offsetValue","VectorPluginGenerator","Vector2","Vector3","Vector4","Vector2Plugin","generator","Vector3Plugin","Vector4Plugin","doTransformRotate","obj","TweenPlugins","rotation","clone","doTransformTranslate","position","doTransformScale","scale","doMaterialValue","mtl","property","getValue","setValue","doMaterialColor","doTransformByDataType","dataType","DataType","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","doTransform","Rotate","Translate","Scale","doMaterial","Float","Color"],"mappings":"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"}